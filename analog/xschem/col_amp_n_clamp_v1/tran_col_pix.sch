v {xschem version=3.4.8RC file_version=1.3}
G {}
K {}
V {}
S {}
F {}
E {}
N -120 -50 -120 -40 {lab=gnd}
N -120 -130 -120 -120 {lab=vphoto}
N -60 -130 -60 -120 {lab=vphoto}
N -120 -130 -60 -130 {lab=vphoto}
N -60 -60 -60 -50 {lab=gnd}
N -120 -50 -60 -50 {lab=gnd}
N -120 -150 -120 -130 {lab=vphoto}
N -120 -60 -120 -50 {lab=gnd}
N -490 90 -410 90 {lab=pix_rst}
N -490 210 -410 210 {lab=_pix_rst}
N -190 80 -190 100 {lab=#net1}
N -190 160 -190 200 {lab=#net2}
N -190 -90 -190 20 {lab=vref}
N 420 -330 510 -330 {lab=pbias}
N 420 -310 510 -310 {lab=pbchk}
N 420 -290 510 -290 {lab=vcascp}
N 420 -270 510 -270 {lab=vout_sense}
N 420 -250 510 -250 {lab=pix_rst}
N 420 -230 510 -230 {lab=vcascn}
N 420 -190 510 -190 {lab=bias_amp_cascn}
N 420 -210 510 -210 {lab=gnd}
N 420 -170 510 -170 {lab=feedback}
N 420 -150 510 -150 {lab=sense}
N 540 -90 540 -70 {lab=gnd}
N 510 -150 540 -150 {lab=sense}
N 510 -170 600 -170 {lab=feedback}
N 600 -110 600 -90 {lab=gnd}
N 420 -350 510 -350 {lab=vdd_col}
N 480 440 510 440 {lab=vdd}
N 440 440 440 510 {lab=bias_amp_cascn}
N 440 510 480 510 {lab=bias_amp_cascn}
N 480 380 480 410 {lab=vdd}
N 480 470 480 510 {lab=bias_amp_cascn}
N 740 -330 830 -330 {lab=clamp_leakp}
N 740 -310 830 -310 {lab=pix_rst}
N 740 -290 830 -290 {lab=vgn}
N 740 -270 830 -270 {lab=vout}
N 740 -250 830 -250 {lab=vout_sense}
N 740 -230 830 -230 {lab=vcm}
N 740 -210 830 -210 {lab=vgp}
N 740 -190 830 -190 {lab=_pix_rst}
N 740 -170 830 -170 {lab=clamp_leakn}
N 740 -150 830 -150 {lab=gnd}
N 740 -350 830 -350 {lab=vdd_clmp}
N 130 510 130 540 {lab=sf_bias}
N 130 570 210 570 {lab=gnd}
N 90 510 90 570 {lab=sf_bias}
N 90 510 130 510 {lab=sf_bias}
N 510 -410 740 -410 {lab=vdd}
N 560 -290 560 -270 {lab=gnd}
N 650 -290 650 -270 {lab=gnd}
N 650 -350 740 -350 {lab=vdd_clmp}
N 510 -350 560 -350 {lab=vdd_col}
N 870 120 870 160 {lab=#net3}
N 910 650 910 680 {lab=vdd}
N 880 710 910 710 {lab=vdd}
N 910 740 910 790 {lab=#net4}
N 910 1000 910 1060 {lab=#net5}
N 910 1120 910 1180 {lab=gnd}
N 910 790 910 820 {lab=#net4}
N 910 850 940 850 {lab=vdd}
N 910 880 910 940 {lab=pbias}
N 1010 710 1010 910 {lab=pbias}
N 910 910 1010 910 {lab=pbias}
N 830 850 870 850 {lab=vcascp}
N 830 960 830 1020 {lab=gnd}
N 830 850 830 900 {lab=vcascp}
N 520 880 520 940 {lab=gnd}
N 520 770 520 820 {lab=vcascn}
N 120 870 150 870 {lab=gnd}
N 80 870 80 900 {lab=gnd}
N 220 950 220 1010 {lab=gnd}
N 220 840 220 890 {lab=#net6}
N 120 840 220 840 {lab=#net6}
N 120 960 120 990 {lab=gnd}
N 120 70 120 90 {lab=#net7}
N 120 150 120 190 {lab=#net8}
N 370 80 370 100 {lab=#net9}
N 370 160 370 200 {lab=#net10}
N 370 20 410 20 {lab=#net11}
N 120 10 170 10 {lab=#net12}
N -120 870 -90 870 {lab=vdd}
N -190 870 -160 870 {lab=vdd}
N -120 960 -120 990 {lab=gnd}
N -40 840 -40 890 {lab=#net13}
N -120 840 -40 840 {lab=#net13}
N -40 950 -40 980 {lab=gnd}
N -280 -90 -190 -90 {lab=vref}
N -280 -130 -230 -130 {lab=sf_bias}
N -280 -150 -120 -150 {lab=vphoto}
N -280 -170 -40 -170 {lab=#net14}
N -40 -230 20 -230 {lab=vdd}
N -630 -250 -580 -250 {lab=row_sel}
N -280 -210 -190 -210 {lab=#net15}
N -280 -250 -190 -250 {lab=#net16}
N -280 -230 -190 -230 {lab=pix_rst}
N -280 -190 -190 -190 {lab=pr_bias}
N 700 430 700 460 {lab=pr_bias}
N 750 400 750 460 {lab=pr_bias}
N 700 320 700 370 {lab=vdd}
N 740 400 750 400 {lab=pr_bias}
N 700 460 750 460 {lab=pr_bias}
N 700 530 700 560 {lab=gnd}
N 660 400 700 400 {lab=vdd}
N 700 460 700 470 {lab=pr_bias}
N 750 400 800 400 {lab=pr_bias}
N 480 570 480 600 {lab=gnd}
N 130 420 130 450 {lab=vdd}
N 1130 80 1240 80 {lab=vout}
N 1310 160 1310 230 {lab=#net17}
N 1330 160 1330 230 {lab=gnd}
N 1240 150 1240 190 {lab=DETECT}
N 1380 90 1460 90 {lab=voutp}
N 1380 110 1460 110 {lab=voutn}
N 1240 10 1240 50 {lab=_DETECT}
N 1180 60 1240 60 {lab=DETECT}
N -490 360 -410 360 {lab=DETECT}
N -490 420 -490 460 {lab=#net18}
N 1400 560 1400 590 {lab=clamp_leakp}
N 1450 530 1450 590 {lab=clamp_leakp}
N 1400 450 1400 500 {lab=vdd}
N 1440 530 1450 530 {lab=clamp_leakp}
N 1400 590 1450 590 {lab=clamp_leakp}
N 1400 660 1400 690 {lab=gnd}
N 1360 530 1400 530 {lab=vdd}
N 1400 590 1400 600 {lab=clamp_leakp}
N 1540 850 1540 880 {lab=clamp_leakn}
N 1540 910 1620 910 {lab=gnd}
N 1540 940 1540 990 {lab=gnd}
N 1500 850 1500 910 {lab=clamp_leakn}
N 1500 850 1540 850 {lab=clamp_leakn}
N 1540 760 1540 790 {lab=vdd}
N -480 750 -480 770 {lab=#net19}
N -520 710 -520 750 {lab=gnd}
N -480 720 -480 750 {lab=#net19}
N -480 660 -400 660 {lab=_DETECT}
N -480 830 -480 860 {lab=gnd}
N -600 670 -520 670 {lab=DETECT}
N 1220 230 1310 230 {lab=#net17}
N 1330 230 1440 230 {lab=gnd}
N 1220 290 1220 340 {lab=vdd}
N 1440 230 1440 280 {lab=gnd}
N -490 520 -490 550 {lab=gnd}
N -490 270 -490 300 {lab=gnd}
N -490 150 -490 180 {lab=gnd}
N -190 260 -190 290 {lab=gnd}
N -120 -40 -120 -10 {lab=gnd}
N 120 250 120 280 {lab=gnd}
N 370 260 370 290 {lab=gnd}
N 130 600 130 630 {lab=gnd}
N 210 570 210 600 {lab=gnd}
N -280 -70 -280 -40 {lab=gnd}
N 1540 990 1540 1020 {lab=gnd}
N 1620 910 1620 940 {lab=gnd}
N 870 220 870 250 {lab=gnd}
N 1460 170 1460 190 {lab=gnd}
N 1540 150 1540 170 {lab=gnd}
N 1460 90 1540 90 {lab=voutp}
N -240 -310 -190 -310 {lab=feedback}
N -120 -340 -80 -340 {lab=sense}
N -190 -210 -80 -210 {lab=#net15}
N -80 -280 -80 -210 {lab=#net15}
N 1120 120 1240 120 {lab=Vthresh}
N 960 180 960 200 {lab=gnd}
N 930 120 960 120 {lab=#net20}
N 960 120 1020 120 {lab=#net20}
N 1100 180 1100 200 {lab=gnd}
N 1080 120 1120 120 {lab=Vthresh}
N 950 710 1010 710 {lab=pbias}
N -280 -110 -190 -110 {lab=vd}
C {devices/code.sym} -870 -370 0 0 {name=TT_MODELS
only_toplevel=true
format="tcleval( @value )"
value="
** opencircuitdesign pdks install
.lib $::SKYWATER_MODELS/sky130.lib.spice tt
"
spice_ignore=false}
C {code_shown.sym} -1700 10 0 0 {name=NGSPICE
only_toplevel=true
value="

Vvdd vdd gnd DC pwr_volt

*Bias Setting
.param xpr_bias=10n
.param xsf_bias=5n
.param xamp_cascn=200n
.param xclmp_lk_p=10p
.param xclmp_lk_n=10p
.param xpix_rst_bias=100n 
.param I_PH = 0
.param pwr_volt = 1.8

*Small Iphoto testing
Iphoto1 vphoto gnd pulse(50n 60n 12u 5n 5n 5.99u 30u) 
Iphoto2 vphoto gnd pulse(50n 40n 24u 5n 5n 5.99u 30u)

*large Iphoto testing
*Iphoto1 vphoto gnd pulse(5n 5u 12u 5n 5n 5.99u 30u) 
*Iphoto2 vphoto gnd pulse(5n 5p 24u 5n 5n 5.99u 30u)

Vrow row_sel gnd DC pwr_volt
Vvcm vcm gnd DC 0.9

.option gmin=1e-15 abstol=1e-15 vntol=1e-9 reltol=1e-6 chgtol=1e-16 trtol=6

.control
	
	save all
	op
	tran 0.2n 39u 
	plot v(vphoto) v(vph_sf) v(vin) v(vout_sense) v(vref) v(vcmp) v(vcm) v(vout)


	write tran_col_pix.raw
.endc
"}
C {devices/launcher.sym} -640 -420 2 1 {name=h1
descr="Annotate OP" 
tclcommand="set show_hidden_texts 1; xschem annotate_op"
}
C {sky130_fd_pr/annotate_fet_params.sym} -580 -10 0 0 {name=annot1 ref=M1}
C {capa.sym} -60 -90 0 0 {name=C1
m=1
value=30f
footprint=1206
device="ceramic capacitor"}
C {lab_pin.sym} -120 -140 2 0 {name=p1 sig_type=std_logic lab=vphoto}
C {vsource.sym} -190 50 0 0 {name=vref value="pulse(0 0.084 100n 10n 10n 1.140u 3u)" savecurrent=false}
C {isource.sym} -120 -90 0 0 {name=Iphoto value=I_PH}
C {sky130_fd_pr/annotate_fet_params.sym} -480 -10 0 0 {name=annot2 ref=M2}
C {sky130_fd_pr/annotate_fet_params.sym} -370 -10 0 0 {name=annot3 ref=M3}
C {vsource.sym} -490 120 0 0 {name=vref1 value="pulse(0 \{pwr_volt\} 2400n 10n 10n 390n 3u)" savecurrent=false}
C {lab_pin.sym} -410 90 2 0 {name=p14 sig_type=std_logic lab=pix_rst}
C {lab_pin.sym} -410 210 2 0 {name=p16 sig_type=std_logic lab=_pix_rst}
C {vsource.sym} -190 130 0 0 {name=vref3 value="pulse(0 0.078 1.250u 10n 10n 1.140u 3u)" savecurrent=false}
C {vsource.sym} -190 230 0 0 {name=vref4 value="DC 0.6" savecurrent=false}
C {lab_pin.sym} -190 10 2 1 {name=p18 sig_type=std_logic lab=vref}
C {lab_wire.sym} 510 -330 0 0 {name=p5 sig_type=std_logic lab=pbias}
C {lab_wire.sym} 510 -310 0 0 {name=p6 sig_type=std_logic lab=pbchk}
C {lab_wire.sym} 510 -290 0 0 {name=p7 sig_type=std_logic lab=vcascp}
C {lab_wire.sym} 510 -270 0 0 {name=p11 sig_type=std_logic lab=vout_sense}
C {lab_wire.sym} 510 -190 0 0 {name=p12 sig_type=std_logic lab=bias_amp_cascn}
C {lab_wire.sym} 510 -230 0 0 {name=p13 sig_type=std_logic lab=vcascn}
C {lab_wire.sym} 500 -250 0 0 {name=p15 sig_type=std_logic lab=pix_rst}
C {lab_wire.sym} 510 -210 0 0 {name=p17 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 510 -170 0 0 {name=p19 sig_type=std_logic lab=feedback}
C {lab_wire.sym} 510 -150 0 0 {name=p22 sig_type=std_logic lab=sense}
C {capa.sym} 540 -120 0 0 {name=C2
m=1
value=300f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 540 -70 0 0 {name=p33 sig_type=std_logic lab=gnd}
C {capa.sym} 600 -140 0 0 {name=C3
m=1
value=300f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 600 -90 0 0 {name=p25 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 480 380 0 0 {name=p45 sig_type=std_logic lab=vdd}
C {sky130_fd_pr/pfet_01v8.sym} 460 440 0 0 {name=Mpb2
W=0.5
L=1
nf=1
mult=4
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 440 470 0 0 {name=p28 sig_type=std_logic lab=bias_amp_cascn}
C {lab_wire.sym} 510 440 0 0 {name=p29 sig_type=std_logic lab=vdd}
C {iopin.sym} -630 -250 2 0 {name=p49 lab=row_sel}
C {lab_wire.sym} 760 -330 0 0 {name=p26 sig_type=std_logic lab=clamp_leakp}
C {lab_wire.sym} 760 -310 0 0 {name=p30 sig_type=std_logic lab=pix_rst}
C {lab_wire.sym} 760 -290 0 0 {name=p31 sig_type=std_logic lab=vgn}
C {lab_wire.sym} 760 -270 0 0 {name=p32 sig_type=std_logic lab=vout}
C {lab_wire.sym} 760 -230 0 0 {name=p34 sig_type=std_logic lab=vcm}
C {lab_wire.sym} 760 -210 0 0 {name=p35 sig_type=std_logic lab=vgp}
C {lab_wire.sym} 760 -190 0 0 {name=p43 sig_type=std_logic lab=_pix_rst}
C {lab_wire.sym} 760 -170 0 0 {name=p44 sig_type=std_logic lab=clamp_leakn}
C {lab_wire.sym} 760 -150 0 0 {name=p47 sig_type=std_logic lab=gnd}
C {sky130_fd_pr/nfet_01v8.sym} 110 570 0 0 {name=M11
W=0.5
L=0.5
nf=1 
mult=1
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 90 510 0 0 {name=p4 sig_type=std_logic lab=sf_bias}
C {lab_wire.sym} 1130 80 0 0 {name=p63 sig_type=std_logic lab=vout}
C {vsource.sym} 510 -380 0 0 {name=vcol_cur value="DC 0" savecurrent=true}
C {vsource.sym} 740 -380 0 0 {name=vclmp_cur value="DC 0" savecurrent=true}
C {lab_wire.sym} 630 -410 0 0 {name=p73 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 480 -350 0 0 {name=p74 sig_type=std_logic lab=vdd_col}
C {lab_wire.sym} 820 -350 0 0 {name=p75 sig_type=std_logic lab=vdd_clmp}
C {capa.sym} 560 -320 0 0 {name=C4
m=1
value=500f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 560 -270 0 0 {name=p77 sig_type=std_logic lab=gnd}
C {capa.sym} 650 -320 0 0 {name=C5
m=1
value=500f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 650 -270 0 0 {name=p78 sig_type=std_logic lab=gnd}
C {vsource.sym} -490 240 0 0 {name=vref2 value="pulse(\{pwr_volt\} 0 2400n 10n 10n 390n 3u)" savecurrent=false}
C {lab_wire.sym} 1200 120 0 0 {name=p79 sig_type=std_logic lab=Vthresh}
C {vsource.sym} 870 190 0 0 {name=vref5 value="DC 0.9" savecurrent=false}
C {lab_wire.sym} 760 -250 0 0 {name=p9 sig_type=std_logic lab=vout_sense}
C {lab_wire.sym} 880 710 0 1 {name=p10 sig_type=std_logic lab=vdd}
C {sky130_fd_pr/pfet_01v8.sym} 930 710 0 1 {name=Mpb1
W=1.25
L=1
nf=1
mult=4
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 910 650 0 1 {name=p27 sig_type=std_logic lab=vdd}
C {res.sym} 910 970 0 0 {name=R1
value=1Meg
footprint=1206
device=resistor
m=1}
C {vsource.sym} 910 1090 0 0 {name=V1 value=0.3103378 savecurrent=true}
C {iopin.sym} 910 1180 2 1 {name=p38 lab=gnd}
C {sky130_fd_pr/pfet_01v8.sym} 890 850 0 0 {name=Mpb4
W=1.25
L=1
nf=1
mult=4
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 940 850 0 1 {name=p42 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 1010 790 0 0 {name=p80 sig_type=std_logic lab=pbias}
C {vsource.sym} 830 930 0 0 {name=V3 value=0.5 savecurrent=true}
C {iopin.sym} 830 1020 2 1 {name=p40 lab=gnd}
C {lab_wire.sym} 830 850 0 0 {name=p41 sig_type=std_logic lab=vcascp}
C {vsource.sym} 520 850 0 0 {name=V2 value=0.25 savecurrent=true}
C {iopin.sym} 520 940 2 1 {name=p46 lab=gnd}
C {lab_wire.sym} 520 770 0 0 {name=p50 sig_type=std_logic lab=vcascn}
C {sky130_fd_pr/nfet_01v8.sym} 100 870 0 0 {name=Mrow_sel2
W=0.5
L=0.5
nf=1 
mult=1
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 150 870 3 0 {name=p81 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 80 900 0 0 {name=p83 sig_type=std_logic lab=gnd}
C {vsource.sym} 220 920 0 0 {name=V4 value=1.8 savecurrent=true}
C {iopin.sym} 220 1010 2 1 {name=p84 lab=gnd}
C {lab_wire.sym} 120 990 0 0 {name=p85 sig_type=std_logic lab=gnd}
C {vsource.sym} 120 930 0 0 {name=V5 value=0 savecurrent=true}
C {vsource.sym} 120 40 0 0 {name=vref6 value="pulse(0 1.8 100n 10n 10n 1.140u 3u)" savecurrent=false}
C {vsource.sym} 120 120 0 0 {name=vref7 value="pulse(0 0 1.250u 10n 10n 1.140u 3u)" savecurrent=false}
C {vsource.sym} 120 220 0 0 {name=vref8 value="DC 0.0" savecurrent=false}
C {vsource.sym} 370 50 0 0 {name=vref9 value="pulse(0 0.098 100n 10n 10n 1.140u 3u)" savecurrent=false}
C {vsource.sym} 370 130 0 0 {name=vref10 value="pulse(0 0.083 1.250u 10n 10n 1.140u 3u)" savecurrent=false}
C {vsource.sym} 370 230 0 0 {name=vref11 value="DC 0.6" savecurrent=false}
C {sky130_fd_pr/pfet_01v8.sym} -140 870 0 0 {name=Mpb3
W=1
L=0.5
nf=1
mult=1
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} -90 870 0 0 {name=p54 sig_type=std_logic lab=vdd}
C {lab_wire.sym} -190 870 0 1 {name=p61 sig_type=std_logic lab=vdd}
C {vsource.sym} -120 930 0 0 {name=V9 value=0 savecurrent=true}
C {lab_wire.sym} -120 990 0 0 {name=p62 sig_type=std_logic lab=gnd}
C {vsource.sym} -40 920 0 0 {name=V10 value=1.8 savecurrent=true}
C {lab_wire.sym} -40 980 0 0 {name=p59 sig_type=std_logic lab=gnd}
C {/home/user/projects/nic2025_v2/nic2025_openDVS/analog/xschem/final/col_amp_n_clamp_v1/col_amp_v1.sym} 270 -250 0 0 {name=x2}
C {/home/user/projects/nic2025_v2/nic2025_openDVS/analog/xschem/final/col_amp_n_clamp_v1/clamp_qdvs_v2.sym} 980 -250 0 1 {name=x1}
C {lab_wire.sym} -260 -130 0 1 {name=p2 sig_type=std_logic lab=sf_bias}
C {vsource.sym} -40 -200 0 0 {name=vpix_cur value="DC 0" savecurrent=true}
C {lab_wire.sym} 20 -230 0 0 {name=p3 sig_type=std_logic lab=vdd}
C {lab_wire.sym} -120 -340 0 0 {name=p8 sig_type=std_logic lab=sense}
C {lab_wire.sym} -240 -310 0 0 {name=p20 sig_type=std_logic lab=feedback}
C {lab_wire.sym} -200 -190 0 0 {name=p51 sig_type=std_logic lab=pr_bias}
C {sky130_fd_pr/pfet_01v8.sym} 720 400 0 1 {name=M2
W=0.5
L=0.5
nf=1 
mult=1
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {isource.sym} 700 500 0 0 {name=Iipr value=xpr_bias}
C {lab_wire.sym} 700 320 2 1 {name=p24 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 700 560 2 1 {name=p36 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 660 400 2 1 {name=p37 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 790 400 0 0 {name=p72 sig_type=std_logic lab=pr_bias}
C {isource.sym} 480 540 0 0 {name=Iipr1 value=xamp_cascn}
C {lab_wire.sym} 480 600 2 1 {name=p86 sig_type=std_logic lab=gnd}
C {isource.sym} 130 480 0 0 {name=Iipr2 value=xsf_bias}
C {lab_wire.sym} 130 420 0 0 {name=p87 sig_type=std_logic lab=vdd}
C {/home/user/projects/nic2025_v2/nic2025_openDVS/analog/xschem/dyn_comp.sym} 1250 210 0 0 {name=x3}
C {lab_wire.sym} 1220 330 3 0 {name=p64 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 1440 270 3 1 {name=p65 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 1440 90 0 0 {name=p66 sig_type=std_logic lab=voutp}
C {lab_wire.sym} 1440 110 0 0 {name=p67 sig_type=std_logic lab=voutn}
C {lab_wire.sym} 1240 190 0 0 {name=p68 sig_type=std_logic lab=DETECT}
C {lab_wire.sym} 1220 60 0 0 {name=p69 sig_type=std_logic lab=DETECT}
C {lab_wire.sym} 1240 10 0 0 {name=p71 sig_type=std_logic lab=_DETECT}
C {vsource.sym} -490 390 0 0 {name=vref12 value="pulse(0 \{pwr_volt\} 1150n 10n 10n 80n 3u)" savecurrent=false}
C {lab_pin.sym} -410 360 2 0 {name=p76 sig_type=std_logic lab=DETECT}
C {vsource.sym} -490 490 0 0 {name=vref13 value="pulse(0 \{pwr_volt\} 2270n 10n 10n 80n 3u)" savecurrent=false}
C {sky130_fd_pr/pfet_01v8.sym} 1420 530 0 1 {name=M3
W=1.5
L=0.5
nf=1 
mult=2
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {isource.sym} 1400 630 0 0 {name=Iipr4 value=xclmp_lk_p}
C {lab_wire.sym} 1400 450 2 1 {name=p92 sig_type=std_logic lab=vdd}
C {lab_wire.sym} 1400 690 2 1 {name=p93 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 1360 530 2 1 {name=p94 sig_type=std_logic lab=vdd}
C {sky130_fd_pr/nfet_01v8.sym} 1520 910 0 0 {name=M1
W=0.75
L=0.5
nf=1 
mult=2
ad="expr('int((@nf + 1)/2) * @W / @nf * 0.29')"
pd="expr('2*int((@nf + 1)/2) * (@W / @nf + 0.29)')"
as="expr('int((@nf + 2)/2) * @W / @nf * 0.29')"
ps="expr('2*int((@nf + 2)/2) * (@W / @nf + 0.29)')"
nrd="expr('0.29 / @W ')" nrs="expr('0.29 / @W ')"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {isource.sym} 1540 820 0 0 {name=Iipr3 value=xclmp_lk_n}
C {lab_wire.sym} 1540 760 0 0 {name=p91 sig_type=std_logic lab=vdd}
C {vcvs.sym} -480 690 0 0 {name=E7 value=-1}
C {lab_wire.sym} -520 750 0 0 {name=p58 sig_type=std_logic lab=gnd}
C {lab_pin.sym} -400 660 2 0 {name=p60 sig_type=std_logic lab=_DETECT}
C {vsource.sym} -480 800 0 0 {name=V6 value=1.8 savecurrent=true}
C {lab_wire.sym} -480 860 0 0 {name=p88 sig_type=std_logic lab=gnd}
C {lab_pin.sym} -600 670 2 1 {name=p95 sig_type=std_logic lab=DETECT}
C {lab_pin.sym} 1450 530 2 0 {name=p57 sig_type=std_logic lab=clamp_leakp
}
C {lab_pin.sym} 1500 850 0 0 {name=p70 sig_type=std_logic lab=clamp_leakn
}
C {vsource.sym} 1220 260 2 0 {name=vcomp_cur value="DC 0.0" savecurrent=true}
C {lab_wire.sym} -490 550 0 0 {name=p23 sig_type=std_logic lab=gnd}
C {lab_wire.sym} -490 300 0 0 {name=p39 sig_type=std_logic lab=gnd}
C {lab_wire.sym} -490 180 0 0 {name=p48 sig_type=std_logic lab=gnd}
C {lab_wire.sym} -190 290 0 0 {name=p52 sig_type=std_logic lab=gnd}
C {lab_wire.sym} -120 -10 0 0 {name=p53 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 120 280 0 0 {name=p55 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 370 290 0 0 {name=p56 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 130 630 2 1 {name=p82 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 210 600 2 1 {name=p89 sig_type=std_logic lab=gnd}
C {lab_wire.sym} -280 -40 2 1 {name=p90 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 1540 1020 2 1 {name=p96 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 1620 940 2 1 {name=p97 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 870 250 2 1 {name=p98 sig_type=std_logic lab=gnd}
C {capa.sym} 1460 140 0 0 {name=C6
m=1
value=200f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 1460 190 0 0 {name=p99 sig_type=std_logic lab=gnd}
C {capa.sym} 1540 120 0 0 {name=C7
m=1
value=200f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 1540 170 0 0 {name=p100 sig_type=std_logic lab=gnd}
C {vsource.sym} -190 -280 0 0 {name=vf_cur value="DC 0.0" savecurrent=true}
C {vsource.sym} -80 -310 0 0 {name=vsense_cur value="DC 0.0" savecurrent=true}
C {res.sym} 900 120 3 0 {name=R2
value=7
footprint=1206
device=resistor
m=1}
C {capa.sym} 960 150 0 0 {name=C8
m=1
value=150f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 960 200 0 0 {name=p101 sig_type=std_logic lab=gnd}
C {res.sym} 1050 120 3 0 {name=R3
value=7
footprint=1206
device=resistor
m=1}
C {capa.sym} 1100 150 0 0 {name=C9
m=1
value=150f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 1100 200 0 0 {name=p102 sig_type=std_logic lab=gnd}
C {lab_wire.sym} -190 -230 0 1 {name=p110 sig_type=std_logic lab=pix_rst}
C {/home/user/projects/nic2025_v2/nic2025_openDVS/analog/xschem/final/col_amp_n_clamp_v1/openDVS_pixel_tia_RL_v1.sym} -430 -160 0 0 {name=x4}
C {lab_wire.sym} -250 -110 0 1 {name=p21 sig_type=std_logic lab=vd}
